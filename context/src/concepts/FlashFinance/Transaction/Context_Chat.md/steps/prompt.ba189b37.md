---
timestamp: 'Sat Oct 18 2025 18:15:18 GMT-0400 (Eastern Daylight Time)'
parent: '[[..\20251018_181518.322450d5.md]]'
content_id: ba189b37899c8c45c49778496d5288b8b064b097724248aa11d75284a304c685
---

# prompt:  Iterate on transaction.ts to implement only the CSV parsing logic for the import\_transactions action. We already have add\_transaction implemented, so focus exclusively on parsing. Keep the design simple and minimal, extracting only the essential fields needed for the transaction state. Use the parse function from Deno’s standard library to read CSV data safely. Normalize all column headers by converting them to lowercase and stripping spaces, underscores, and punctuation before matching. Match against as many reasonable synonyms as possible for the relevant categories. For DATE fields, include variations such as date, transaction date, posting date, posted, trans date, and value date. For MERCHANT fields, include description, merchant, merchant name, payee, memo, details, narrative, and name. For AMOUNT fields, include amount, transaction amount, amount usd, amt, and value. For DEBIT, include debit, withdrawal, debit amount, outflow, and spent. For CREDIT, include credit, deposit, credit amount, inflow, and received. For TYPE, include type, drcr, and transaction type. When parsing amounts, keep only cost or outflow transactions. Prefer debit columns if present. Date parsing should be best effort—if invalid, set it to null and still import the row. Return an array of parsed transaction info objects containing amount, and optionally date and merchant\_text. Then implement import\_transactions so it calls parse\_info to obtain parsed transactions and uses add\_transaction(owner\_id, info) for each entry. Return all created TransactionDoc objects. Follow the same structure and import conventions as label.ts, stay minimal, and do not add new actions or extra state.
